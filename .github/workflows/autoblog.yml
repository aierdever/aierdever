name: Publish page

on:
  push:
    branches:
      - master

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [16.x]
    steps:
      - name: Checkout 
        uses: actions/checkout@v2 # If you're using actions/checkout@v2 you must set persist-credentials to false in most cases for the deployment to work correctly.
        with:
          persist-credentials: false

      - name: Install and Build  # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.
        run: |
          npm install
          npm run build
          
      # - name: Deploy 
      #   uses: JamesIves/github-pages-deploy-action@releases/v3
      #   with:
      #     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      #     BRANCH: page # The branch the action should deploy to.
      #     FOLDER: .vuepress/dist # The folder the action should deploy.

      - name: GitHub Pages
        # You may pin to the exact commit or the version.
        # uses: crazy-max/ghaction-github-pages@c0d7ff0487ee0415efb7f32dab10ea880330b1dd
        uses: crazy-max/ghaction-github-pages@v3.1.0
        with:
          # Git domain (default github.com)
          domain: # optional, default is github.com
          # GitHub repository where assets will be deployed (default $GITHUB_REPOSITORY)
          repo: /aierdever/aierdever.github.io.git
          # Git branch where assets will be deployed
          target_branch: page
          # Build directory to deploy
          build_dir: .vuepress/dist
          # Whether to treat build_dir as an absolute path
          # absolute_build_dir: # optional, default is false
          # If enabled, the content of symbolic links will be copied
          # follow_symlinks: # optional, default is false
          # The committer name and email address
          committer: aierdever
          # The author name and email address
          author: aierdever